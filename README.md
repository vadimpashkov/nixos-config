# Конфигурация NixOS

Этот репозиторий содержит модульную конфигурацию для NixOS, построенную на основе flakes. Конфигурация ориентирована на простоту масштабирования и удобство сопровождения, включая системные настройки и пользовательские профили.

---

## Структура репозитория

```plaintext
nixos-config/
├── flake.nix                # Основной файл flakes
├── modules/                 # Модули для системы и Home Manager
│   ├── nixos/               # Системные модули
│   ├── home-manager/        # Пользовательские модули Home Manager
├── system/                  # Системные конфигурации (звук, графика, загрузка)
├── users/                   # Конфигурации пользователей
├── profiles/                # Профили для сценариев (например, desktop)
├── pkgs/                    # Пользовательские пакеты
├── gui/                     # Настройки графического окружения (ags)
├── config.nix               # Основные настройки (редактировать под себя)
```

---

## Начало работы

### 1. Клонируйте репозиторий

```bash
git clone https://github.com/vadimpashkov/nixos-config.git
cd nixos-config
```

### 2. Включите поддержку Flakes

Добавьте в `/etc/nix/nix.conf` следующую строку:

```ini
experimental-features = nix-command flakes
```

Перезапустите Nix, чтобы изменения вступили в силу:

```bash
sudo systemctl restart nix-daemon
```

### 3. Настройте `config.nix`

Перед использованием отредактируйте файл `nixos-config/config.nix` под свои потребности. Этот файл содержит пути к модулям, профилям и дополнительные настройки вашей системы. Например, вы можете изменить стандартного пользователя или включить собственные пути к кастомным модулям.

### 4. Примените конфигурацию

#### Для системы:

```bash
sudo nixos-rebuild switch --flake .#<hostname>
```

Замените `<hostname>` на имя вашего хоста (например, `desktop`).

#### Для пользователя:

```bash
home-manager switch --flake .#<username>
```

Замените `<username>` на имя пользователя (например, `anisutsuri`).

---

## Алиасы

После настройки `config.nix` и пересборки вам станут доступны следующие алиасы:

- **`uos`**: Быстрая пересборка и обновление всей системы.
- **`uhm`**: Обновление конфигурации Home Manager.

Эти алиасы определены в `pkgs/updater` и интегрированы в вашу систему через конфигурацию \`kitty\`.

---

## Заметки

- **Git**: Убедитесь, что все изменения добавлены в Git перед первой сборкой:

  ```bash
  git add .
  ```

  Далее добавлять изменения в Git будет алиас `uos` или `uhm`.

- **Ошибки**: Если возникает ошибка вида `path '<path>' does not exist`, проверьте, что указанные файлы добавлены в Git и ваши настройки в `config.nix` корректны.

---

## Лицензия

Проект распространяется под лицензией MIT.
